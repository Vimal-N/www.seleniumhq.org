<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Emitting Code · Selenium IDE</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;Selenium IDE has two major components, playback inside the browser, which is powered by &lt;code&gt;actions&lt;/code&gt; and &lt;code&gt;events&lt;/code&gt;.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Emitting Code · Selenium IDE"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.seleniumhq.org/selenium-ide/index.html"/><meta property="og:description" content="&lt;p&gt;Selenium IDE has two major components, playback inside the browser, which is powered by &lt;code&gt;actions&lt;/code&gt; and &lt;code&gt;events&lt;/code&gt;.&lt;/p&gt;
"/><meta property="og:image" content="https://www.seleniumhq.org/selenium-ide/img/selenium-ide128.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://www.seleniumhq.org/selenium-ide/img/selenium-ide128.png"/><link rel="shortcut icon" href="/selenium-ide/img/selenium-ide32.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://www.seleniumhq.org/selenium-ide/blog/atom.xml" title="Selenium IDE Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://www.seleniumhq.org/selenium-ide/blog/feed.xml" title="Selenium IDE Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-80983440-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/selenium-ide/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/selenium-ide/"><img class="logo" src="/selenium-ide/img/selenium-ide128.png" alt="Selenium IDE"/><h2 class="headerTitleWithLogo">Selenium IDE</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/selenium-ide/docs/en/introduction/getting-started" target="_self">Docs</a></li><li class=""><a href="/selenium-ide/docs/en/api/commands" target="_self">API</a></li><li class="siteNavGroupActive"><a href="/selenium-ide/docs/en/plugins/plugins-getting-started" target="_self">Plugins</a></li><li class=""><a href="/selenium-ide/blog/" target="_self">Blog</a></li><li class=""><a href="/selenium-ide/help" target="_self">Help</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Concepts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/selenium-ide/docs/en/plugins/plugins-getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/selenium-ide/docs/en/plugins/extension-id">Selenium IDE Extension ID</a></li><li class="navListItem"><a class="navItem" href="/selenium-ide/docs/en/plugins/health-checks">Health Checks</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Concepts</h3><ul><li class="navListItem"><a class="navItem" href="/selenium-ide/docs/en/plugins/requests">Requests</a></li><li class="navListItem"><a class="navItem" href="/selenium-ide/docs/en/plugins/error-handling">Error Handling</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/selenium-ide/docs/en/plugins/emitting-code">Emitting Code</a></li><li class="navListItem"><a class="navItem" href="/selenium-ide/docs/en/plugins/code-export">Exporting Code</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Extending the IDE</h3><ul><li class="navListItem"><a class="navItem" href="/selenium-ide/docs/en/plugins/adding-commands">Adding Commands</a></li><li class="navListItem"><a class="navItem" href="/selenium-ide/docs/en/plugins/ide-events">IDE Events</a></li><li class="navListItem"><a class="navItem" href="/selenium-ide/docs/en/plugins/emitting-setup-teardown">Emitting Setup &amp; Teardown</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API Reference</h3><ul><li class="navListItem"><a class="navItem" href="/selenium-ide/docs/en/api/plugins/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/selenium-ide/docs/en/api/plugins/system">System</a></li><li class="navListItem"><a class="navItem" href="/selenium-ide/docs/en/api/plugins/playback">Playback</a></li><li class="navListItem"><a class="navItem" href="/selenium-ide/docs/en/api/plugins/record">Record</a></li><li class="navListItem"><a class="navItem" href="/selenium-ide/docs/en/api/plugins/popup">Popup</a></li><li class="navListItem"><a class="navItem" href="/selenium-ide/docs/en/api/plugins/export">Export</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Emitting Code</h1></header><article><div><span><p>Selenium IDE has two major components, playback inside the browser, which is powered by <code>actions</code> and <code>events</code>.</p>
<p>And playback in command line mode using <a href="../introduction/command-line-runner">the command-line runner</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="selenium-side-runner-environment"></a><a href="#selenium-side-runner-environment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Selenium SIDE Runner Environment</h3>
<p>The runner is based on Node, you can leverage the environment to emit better code.</p>
<ul>
<li>Node.js 8 or above with npm</li>
<li><a href="https://facebook.github.io/jest/">Jest</a></li>
<li><a href="https://github.com/applitools/jest-environment-selenium">jest-environment-selenium</a></li>
<li><a href="https://www.npmjs.com/package/selenium-webdriver">selenium-webdriver</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="emitting-code"></a><a href="#emitting-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Emitting Code</h2>
<p>When emitting code certain points has to be taken, since your plugin isn't the only one that emits it, and isn't the one that controls the flow of the emissions.<br>
In order to make sure that plugins don't mess each other's execution, certain precautions must be taken.</p>
<h3><a class="anchor" aria-hidden="true" id="never-use-return"></a><a href="#never-use-return" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Never Use Return</h3>
<p>The keyword <code>return</code> means that the code after you will never be reachable, you could hinder other plugins.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">return</span> somePromise();
plugin2Func(); <span class="hljs-comment">// unreachable</span>
</code></pre>
<p>Instead, since we are using Node 8 or above, we can leverage <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function">async functions</a>.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">await</span> somePromise();
plugin2Func(); <span class="hljs-comment">//works</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="don-t-define-variables-on-the-global-scope"></a><a href="#don-t-define-variables-on-the-global-scope" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Don't Define Variables on the Global Scope</h3>
<p>Defining variables on the global scope, means that if you and another plugin, or Selenium IDE itself, defines the same variable, an error, or an unknown side effect can happen, which will make things hard to debug.</p>
<p>For example take this test case:</p>
<ul>
<li><code>store</code> | <code>button</code> | <code>element</code></li>
<li><code>plugin click</code> | <code>button</code></li>
<li><code>assert element present</code> | <code>css=${element}</code></li>
</ul>
<p>If you define a variable the code will look as follows</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">let</span> element = <span class="hljs-string">"button"</span>;
<span class="hljs-keyword">let</span> element = <span class="hljs-keyword">await</span> driver.findElement();
<span class="hljs-keyword">await</span> element.click();
expect(element).toBePresent(); <span class="hljs-comment">// different button!</span>
</code></pre>
<p>To avoid defining a variable on the global scope, use the <code>then</code> function of the Promise</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">let</span> element = <span class="hljs-string">"button"</span>;
<span class="hljs-keyword">await</span> driver.findElement().then(<span class="hljs-function"><span class="hljs-params">element</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> element.click();
});
expect(element).toBePresent(); <span class="hljs-comment">// the store defined button</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="summing-up"></a><a href="#summing-up" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Summing Up</h3>
<p>In general, try avoiding messing with the global scope, if you need to define you can always use the Promise's <code>then</code> or worse case use an <a href="https://developer.mozilla.org/en-US/docs/Glossary/IIFE">iife</a>.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2/21/2019</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/selenium-ide/docs/en/plugins/error-handling"><span class="arrow-prev">← </span><span>Error Handling</span></a><a class="docs-next button" href="/selenium-ide/docs/en/plugins/code-export"><span>Exporting Code</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#emitting-code">Emitting Code</a><ul class="toc-headings"><li><a href="#never-use-return">Never Use Return</a></li><li><a href="#don-t-define-variables-on-the-global-scope">Don't Define Variables on the Global Scope</a></li><li><a href="#summing-up">Summing Up</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/selenium-ide/" class="nav-home"><img src="/selenium-ide/img/selenium-ide64.png" alt="Selenium IDE" width="64"/></a><div><h5>Docs</h5><a href="/selenium-ide/docs/en/introduction/getting-started">Getting Started</a><a href="/selenium-ide/docs/en/api/commands">API Reference</a><a href="/selenium-ide/docs/en/plugins/plugins-getting-started">Build a Plugin</a></div><div><h5>Community</h5><a href="https://seleniumhq.herokuapp.com/" target="_blank" rel="noreferrer noopener">Slack</a><a href="https://webchat.freenode.net/" target="_blank" rel="noreferrer noopener">irc (#selenium)</a><a href="https://groups.google.com/forum/#!forum/selenium-users" target="_blank" rel="noreferrer noopener">Google group</a></div><div><h5>More</h5><a href="/selenium-ide/blog">Blog</a><a href="https://github.com/seleniumhq/selenium-ide" target="_blank" rel="noreferrer noopener">GitHub</a><a class="github-button" href="https://github.com/seleniumhq/selenium-ide" data-icon="octicon-star" data-count-href="/seleniumhq/selenium-ide/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><a href="/selenium-ide/legacy">Legacy IDE</a></div></section><section class="copyright">Copyright © 2019 Software Freedom Conservancy (SFC)</section></footer></div></body></html>